<html>
    <head>
        <title>Révision de français CE1 - Lexique !</title> 
        <meta charset="utf-8"> 
        <link rel="stylesheet" href="styles.css">
        <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    </head>
    <body>
        <header>
            <h1>Révision de français CE1</h1> 
            <nav>
                <ul> <!--Liste des liens-->
                    <li> <a href="accueil1.html">Accueil</a> </li> 
                    <li><a href="lexique.html">Lexique</a></li> 
                    <li><a href="conjugaison.html">Conjugaison</a></li>
                    <li><a href="grammaire.html">Grammaire</a></li> 
                    <li><a href="orthographe.html">Orthographe</a></li> 
                    <li><a href="lecture.html">Lecture</a></li> 
					<li><a href="dictée.html">Dictée</a></li> 
					<li> <a href="bilan.html">Bilan</a> </li> 
                </ul>
            </nav>
        </header>
        <div id="ref">
            <p>Dans chaque liste, trouve l’intrus !</p> <!--consigne-->
        </div>
        <section>
            <article>
                <h2>Exercice</h2> <!--sous-titre-->
                <p class="liste">Liste 1</p> <!--titre pour la première liste -->
                <div id="liste1"> <!--première liste avec les mots -->
                    <p class="reponse" id="r1">bleu</p> 
                    <p class="reponse" id="r2">rouge</p> 
                    <p class="reponse" id="r3">cuir</p>
                    <p class="reponse" id="r4">vert</p>
				</div>
                <p class="liste">Liste 2</p> <!--titre pour la deuxième liste-->
                <div id="liste2"> <!--deuxième liste avec les mots -->
                    <p class="reponse" id="r1">nuage</p> 
                    <p class="reponse" id="r2">ciel</p> 
                    <p class="reponse" id="r3">pelouse</p> 
                    <p class="reponse" id="r4">arc-en-ciel</p> 
                </div>
                <p class="liste">Liste 3</p> <!--titre pour la troisième liste-->
                <div id="liste3"> <!--troisième liste avec les mots-->
                    <p class="reponse" id="r1">chaise</p> 
                    <p class="reponse" id="r2">canapé</p>
                    <p class="reponse" id="r3">tabouret</p>
                    <p class="reponse" id="r4">table</p>
                </div>
                <p class="liste">Liste 4</p> <!--titre pour la quatrième liste-->
                <div id="liste4"> <!--quatrième liste avec les mots -->
                    <p class="reponse" id="r1">pomme</p> 
                    <p class="reponse" id="r2">avocat</p> 
                    <p class="reponse" id="r3">abricot</p> 
                    <p class="reponse" id="r4">kiwi</p>
                </div>
                <button id="bilan" onclick="calculateScore()">Bilan</button> <!--bouton pour afficher le bilan-->
                <div id="bilan1" style="display:none;"> <!--caché au départ-->
                    <h3>Bilan</h3> <!--titre du bilan-->
                    <p id="resultat"></p> <!--résultat du score-->
                    <p id="reponsemot"></p> <!--affichage des réponses-->
                </div>
            </article>
        </section>
        <script>
            let correctAnswers = 0; //variable pour compter le nombre de réponses correctes
            //fonction pour suivre les réponses pour chaque liste
            function checkAnswer(listeId, correctAnswer) {
                $(`#${listeId} .reponse`).on("click", function () { //sélectionne les réponses d'une liste et écoute le clic sur elles
                    const reponse = $(this).text(); //récupère le texte de l'élément cliqué
                    $(this).find('img').remove(); //supprime l'image en cliquant
                    if (reponse === correctAnswer) { //vérifie si la réponse est correcte
                        correctAnswers++; //incrémente le compteur de réponses correctes
                        $(this).append('<img src="vrai.png" alt="Bonne réponse"/>'); //image pour la bonne réponse
                        $(this).siblings().find('img').remove(); //enlève l'image des autres réponses dans la même liste
                    } else {
                        $(this).append('<img src="faux.png" alt="Mauvaise réponse"/>'); //image pour la mauvaise réponse
                        $(this).siblings().find('img').remove(); //enlève l'image des autres réponses dans la même liste
                    }
                }).on("mouseover", function () { //survol de la souris
                    $(this).addClass("survol"); //change le style visuellement pendant le survol
                }).on("mouseleave", function () { //la souris ne survole plus l'élément
                    $(this).removeClass("survol"); //plus de style lorsque la souris quitte l'élément
                });
            }
            //fonction pour chaque liste avec la réponse correcte
            checkAnswer("liste1", "cuir"); 
            checkAnswer("liste2", "pelouse"); 
            checkAnswer("liste3", "table"); 
            checkAnswer("liste4", "avocat"); 
            //gestion bouton Bilan
            $("#bilan").click(function() { //lorsque l'on clique sur le bilan
                $('#bilan1').show(); //affiche le bilan caché par défaut
                $('#resultat').text("Tu as " + correctAnswers + " bonne(s) réponse(s) sur 4 !"); //affiche le score calculé
           //stockage du score
            localStorage.setItem("lexique_score", correctAnswers); //sauvegarde le score dans le navigateur avec lexique_score
			console.log("Lexique score enregistré :", correctAnswers); });
			
        </script>
    </body>
</html>