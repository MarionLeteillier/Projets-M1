<html>
    <head>
        <title>Révision de français CE1 - Conjugaison !</title> 
        <meta charset="utf-8">
        <link rel="stylesheet" href="styles.css"> 
        <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    </head>
    <body>
        <header>
            <h1>Révision de français CE1</h1>
            <nav>
                <ul>
                    <li><a href="accueil1.html">Accueil</a></li>
                    <li><a href="lexique.html">Lexique</a></li>
                    <li><a href="conjugaison.html">Conjugaison</a></li>
                    <li><a href="grammaire.html">Grammaire</a></li>
                    <li><a href="orthographe.html">Orthographe</a></li>
                    <li><a href="lecture.html">Lecture</a></li>
					<li><a href="dictée.html">Dictée</a></li>
					<li><a href="bilan.html">Bilan</a></li>
                </ul>
            </nav>
        </header>
		<div id="ref">
            <p>Pour chaque phrase, trouve le bon temps ! (passé, présent, futur)</p> <!--consigne-->
        </div>
    <section>
        <!--chaque article a un exercice-->
        <article>
            <h2>Exercice 1</h2> <!--énoncé-->
             <p class="phrase">"Aujourd’hui, Charlie mange au restaurant."</p>
			 <input type="text" class="reponse" placeholder="Réponse..."> <!--zone de saisie pour la réponse-->
            <button class="reponsevraie">Valider</button> <!--bouton pour valider la réponse-->
            <img src="gifvrai.gif" alt="Vrai" class="animal" style="display: none;"> <!--image affichée si réponse correcte-->
            <img src="faux.gif" alt="Faux" class="animal" style="display: none;"> <!--image affichée si réponse incorrecte-->
        </article>
        <article>
            <h2>Exercice 2</h2>
			<p class="phrase">"Demain, il mangera chez lui."</p>
            <input type="text" class="reponse" placeholder="Réponse...">
            <button class="reponsevraie">Valider</button>
            <img src="gifvrai.gif" alt="Vrai" class="animal" style="display: none;">
            <img src="faux.gif" alt="Faux" class="animal" style="display: none;">
        </article>
        <article>
            <h2>Exercice 3</h2>
			<p class="phrase">"Hier, il a fait mauvais temps."</p>
            <input type="text" class="reponse" placeholder="Réponse...">
            <button class="reponsevraie">Valider</button>
            <img src="gifvrai.gif" alt="Vrai" class="animal" style="display: none;">
            <img src="faux.gif" alt="Faux" class="animal" style="display: none;">
        </article>
        <article>
            <h2>Exercice 4</h2>
			<p class="phrase">"En ce moment, il y a un grand soleil."</p>
            <input type="text" class="reponse" placeholder="Réponse...">
            <button class="reponsevraie">Valider</button>
            <img src="gifvrai.gif" alt="Vrai" class="animal" style="display: none;">
            <img src="faux.gif" alt="Faux" class="animal" style="display: none;">
            <div>
                <button id="bilan">Bilan</button> <!--bouton pour afficher le bilan-->
                <div id="bilan1" style="display: none;"> <!--score total masqué par défaut-->
                    <p id="score"></p> <!--affiche le score-->
                </div>
            </div>
        </section>
        </article>    
        </div>
    </section>
    <script>
		$(document).ready(function() { //s'il n'y a pas ça, le code JavaScript s'exécute et les éléments HTML n'existent pas encore dans la mémoire
        let bonnesReponses = 0;  //initialise le compteur des bonnes réponses
        const reponsesCorrectes = ["présent", "futur", "passé", "présent"]; //réponses correctes pour chaque exercice
        $(".reponsevraie").click(function() { //lorsque l'on clique sur la bonne réponse
            const reponse = $(this).siblings(".reponse").val().toLowerCase(); //recherche les frères/soeurs de $ this, récupère la réponse et la convertit en minuscules, pour ne pas être sensible à la casse
            const indexExercice = $(this).parent().index(); //trouve l'index de l'article pour vérifier la bonne réponse
            const imageVrai = $(this).siblings("img.animal").eq(0); //l'image de bonne réponse 
            const imageFaux = $(this).siblings("img.animal").eq(1); //l'image de mauvaise réponse 
            $("img.animal").hide();  // cache les images avant de vérifier la réponse
            //vérifie si la réponse est correcte
            if (reponse === reponsesCorrectes[indexExercice]) {
                imageVrai.show(); //affiche l'image de bonne réponse
                bonnesReponses++;  //incrémente le compteur des bonnes réponses
            } else {
                imageFaux.show(); //affiche l'image de mauvaise réponse
            }
        });
        //gestion du bouton Bilan pour afficher le score de tout
        $("#bilan").click(function() {
            $("#bilan1").show(); //affiche la section bilan
            $("#score").text(`Tu as ${bonnesReponses} bonne(s) réponse(s).`); //affiche le nombre de bonnes réponses à l'utilisateur
			localStorage.setItem("conjugaison_score", bonnesReponses); //stocke le score en mémoire
        });
    }); 
	</script>
</body>
</html>